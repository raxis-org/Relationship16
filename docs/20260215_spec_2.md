# 本プロジェクト「**Kizuna-Mode（絆モード）**」完全仕様書

**バージョン:** 2.0
**作成日:** 2026年2月15日
**作成者:** Manus AI

## 1. コンセプトと基本設計

*   **キャッチコピー：** 「誰とでも、絶対にマッチする。二人の『最適モード』発見ツール」
*   **コアバリュー：** 相性の良し悪しを判定するのではなく、今の二人に最もフィットする「関係性のスタイル（モード）」を提示し、建設的な付き合い方をガイドする。
*   **入力データ：**
    1.  **定数項目：** 年齢、MBTI（16タイプ）、関係性カテゴリ（恋人/友人/仕事/家族）
    2.  **変数項目：** 相互診断質問（32問）

## 2. 診断の4つの観点（Axis）

心理学の「社会的交換理論」をベースに、関係性を決定づける4つの変数を定義します。

| 軸 | コード | 名称 | 左側の状態 (Score < 閾値) | 右側の状態 (Score ≥ 閾値) |
|:---|:---|:---|:---|:---|
| **1** | **P** | **Power (権力均衡)** | **H: Hierarchical (不均衡)**<br>主従・依存・先導 | **E: Equal (平等)**<br>対等・共治・フラット |
| **2** | **M** | **Motive (関与動機)** | **I: Instrumental (手段的)**<br>目的達成の道具・利害 | **B: Being (存在的)**<br>相手の存在自体が目的・愛 |
| **3** | **G** | **Goal (目的整合)** | **A: Autonomous (独立)**<br>個別の目標・干渉しない | **S: Synergetic (共鳴)**<br>同じ目標・ビジョンの共有 |
| **4** | **V** | **Value (価値共感)** | **D: Diverse (多様性)**<br>異なる価値観・補完関係 | **C: Congruent (一致)**<br>似た価値観・同質性 |

## 3. 診断質問項目（32問）

ユーザーA、Bそれぞれが「相手との関係」について回答します（1: 全く違う 〜 5: 全くその通り）。

| No | 軸 | コード | 質問内容 |
|:---|:---|:---|:---|
| 1 | P | P1 | 何か決める時、どちらか一方の意見が最終的に通ることが多い。（逆転項目） |
| 2 | P | P2 | 相手に対して、自分の本音を遠慮なく伝えることができる。 |
| 3 | P | P3 | 二人の関係において、パワーバランスは常に50:50であると感じる。 |
| 4 | P | P4 | 相手の顔色を伺って、自分の行動を無意識に変えてしまうことがある。（逆転項目） |
| 5 | P | P5 | お互いにお願いごとをされた時、断ることに心理的な抵抗がない。 |
| 6 | P | P6 | 二人は精神的に自立しており、過度に依存し合っていない。 |
| 7 | P | P7 | 相手の意見が自分と異なっていても、それを尊重し、受け入れることができる。 |
| 8 | P | P8 | 私は、この関係性において、より多くの責任や負担を担っていると感じる。 |
| 9 | M | M1 | 相手と一緒にいるのは、何らかの目的やメリットがあるからだ。（逆転項目） |
| 10 | M | M2 | 相手が何かを成し遂げた時、自分のことのように嬉しい。 |
| 11 | M | M3 | 相手の欠点や弱さも含めて、その人自身に深い興味がある。 |
| 12 | M | M4 | 二人で過ごす時間は、効率や目的達成よりも「ただ一緒にいる心地よさ」を重視している。 |
| 13 | M | M5 | たとえ相手に何のメリットも提供できなくなったとしても、この関係は続くと信じている。 |
| 14 | M | M6 | 相手が本当に困っているなら、自分を多少犠牲にしてでも助けたいと思う。 |
| 15 | M | M7 | 相手との関係は、恋愛や友情といった言葉だけでは表現できない、特別なつながりだと感じる。 |
| 16 | M | M8 | 相手の存在そのものが、自分の日々の活力になっている。 |
| 17 | G | G1 | 二人で共有している具体的な「目標」や「夢」が存在する。 |
| 18 | G | G2 | 私たちは「一つのチーム」として、共通の課題に取り組んでいる感覚がある。 |
| 19 | G | G3 | 個人の成功よりも、二人の共通の目標が達成されることを優先したい。 |
| 20 | G | G4 | 相手の夢や目標をサポートすることが、自分の喜びにも繋がっている。 |
| 21 | G | G5 | 二人が目指している将来の方向性は、驚くほど似ている。 |
| 22 | G | G6 | 困難に直面した時、二人の解決策は自然と同じ方向を向くことが多い。 |
| 23 | G | G7 | 二人の未来について具体的に話す時、ワクワクした気持ちになる。 |
| 24 | G | G8 | 正直なところ、二人の長期的な目標は異なっていると感じる。（逆転項目） |
| 25 | V | V1 | 金銭感覚や時間の使い方が、相手と非常に近いと感じる。 |
| 26 | V | V2 | 大切にしている倫理観や道徳観が、根本的に一致している。 |
| 27 | V | V3 | ユーモアのセンスや笑いのツボが似ていて、一緒にいて心から笑える。 |
| 28 | V | V4 | 相手の考え方や価値観に、時々ついていけないと感じることがある。（逆転項目） |
| 29 | V | V5 | 「何が正しいか」という議論で、意見が真っ向から対立することは少ない。 |
| 30 | V | V6 | 生活のリズムや休日の過ごし方が似ており、一緒にいてストレスを感じない。 |
| 31 | V | V7 | 相手の持つ独特な価値観は、自分にとって新しい発見や刺激になっている。 |
| 32 | V | V8 | 相手の価値観を理解し、尊重することは、自分自身の成長にも繋がると感じる。 |

## 4. 計算ロジックと各種補正

### 4.1 基本得点算出

1.  **逆転項目の処理:** 逆転項目（No. 1, 4, 9, 24, 28）の回答 `R` を `6 - R` に変換します。
2.  **個人別・軸別スコア:** 各軸（P, M, G, V）ごとに、ユーザーA・Bそれぞれの8問の回答の平均値を算出します。
    `Raw_Score_X_k = (1/8) * Σ(Q1..Q8)`

### 4.2 MBTIによる認識補正

MBTIの特性による回答の主観的な偏りを補正するため、以下の補正値 `δ` を加味します。

| MBTI次元 | 影響する軸 | 補正値 δ | 根拠 |
|:---|:---|:---:|:---|
| I (内向) | P (権力均衡) | +0.3 | 自己主張を控えめに評価する傾向を補正 |
| E (外向) | P (権力均衡) | -0.1 | 自己影響力を過大評価する傾向を補正 |
| T (思考) | M (関与動機) | +0.25 | 感情的動機を過小評価する傾向を補正 |
| F (感情) | M (関与動機) | -0.1 | 感情的動機を過大評価する傾向を補正 |
| J (判断) | G (目的整合) | +0.15 | 目標共有を過小評価する傾向を補正 |
| P (知覚) | G (目的整合) | -0.1 | 柔軟性を過大評価する傾向を補正 |
| S (感覚) | V (価値共感) | +0.1 | 具体的な違いに注目しすぎる傾向を補正 |
| N (直観) | V (価値共感) | -0.1 | 抽象的な共通点を過大評価する傾向を補正 |

`Adjusted_Score_X_k = clamp(Raw_Score_X_k + δ_X_k, 1.0, 5.0)`

### 4.3 年齢差による補正

年齢差 `|Age_A - Age_B|` に応じてP軸（権力均衡）の閾値を調整します。

*   **3歳差以下:** 補正なし
*   **4〜10歳差:** P軸閾値を `-0.15`
*   **11歳差以上:** P軸閾値を `-0.3`

### 4.4 ペアスコアの統合と判定

1.  **統合スコア (Pair Score):** `Pair_k = (Adjusted_A_k + Adjusted_B_k) / 2`
2.  **認識ズレスコア (Gap Score):** `Gap_k = |Adjusted_A_k - Adjusted_B_k|`
3.  **判定:** 関係性カテゴリと年齢差補正を反映した最終閾値に基づき、各軸が左右どちらの状態かを判定します。

| カテゴリ | P軸閾値 | M軸閾値 | G軸閾値 | V軸閾値 |
|:---|:---:|:---:|:---:|:---:|
| 恋人 | 3.0 | 3.2 | 3.0 | 2.8 |
| 友人 | 3.0 | 2.8 | 2.8 | 3.0 |
| 仕事 | 3.2 | 2.5 | 3.2 | 2.8 |
| 家族 | 2.8 | 3.0 | 2.8 | 3.0 |

`Pair_k >= Final_Threshold_k` であれば右側と判定。

### 4.5 総合相性指標

*   **関係性フィット度 (Fit Score):** 各軸のスコアが閾値からどれだけ明確に離れているかを示す指標。`Fit_Score = AVG(|Pair_k - Threshold_k|) / 2.0 * 100`
*   **関係性安定度 (Stability Score):** 認識のズレがどれだけ小さいかを示す指標。`Stability_Score = AVG(1 - Gap_k / 4.0) * 100`
*   **総合スコア (Kizuna Score):** `0.4 * Fit_Score + 0.6 * Stability_Score`

## 5. 16の関係性タイプ詳細

| コード | タイプ名 | 概要 | 二人でやるとよいこと | やるべきでないこと |
|:---|:---|:---|:---|:---|
| **EBSC** | **運命の双子** | 全ての軸で調和が取れた理想的な関係。 | 共同での創造活動、長期的なビジョン共有。 | 些細な意見の対立を恐れて本音を隠すこと。 |
| **EBSD** | **最強の相棒** | 価値観の違いを強みに変える戦友。 | 未知の分野への挑戦、健全なディベート。 | 自分の価値観を相手に無理強いすること。 |
| **EASC** | **心地よい隣人** | 互いの独立性を尊重し合う、安定した関係。 | 同じ空間で別々の作業、定期的な近況報告会。 | 過度な干渉や、相手のプライベートへの踏み込み。 |
| **EASD** | **知的な探検隊** | 個々の自由を尊重しつつ、知的好奇心で繋がる。 | 共通の趣味のサークル参加、新しいスキルの学習。 | 常に一緒に行動し、一人の時間をなくすこと。 |
| **EBAC** | **良きライバル** | 目的は違えど、互いの存在が成長の糧となる。 | スキルアップのための勉強会、互いの成果発表。 | 相手の成功を妬み、足を引っ張ること。 |
| **EBAD** | **刺激的な他者** | 異なる価値観と目標が、常に新鮮な発見を生む。 | 海外旅行、普段行かない場所でのデート。 | 相手を自分の型にはめようとすること。 |
| **EIAC** | **効率の賢者** | 合理的な判断で、無駄なく目的を達成するペア。 | 資産運用計画、プロジェクトの共同管理。 | 感情的な慰めや共感を一方的に求めること。 |
| **EIAD** | **多角的同盟** | 異なる視点とスキルで、複雑な問題を解決する。 | 事業戦略の立案、リスク分析。 | 目的達成後に、関係を維持する努力を怠ること。 |
| **HBSC** | **師弟の絆** | 尊敬と信頼に基づき、知識やスキルが継承される。 | メンタリング、弟子への具体的な指導。 | 師匠が権威を振りかざし、弟子が思考停止すること。 |
| **HBSD** | **導きの手** | 経験豊富な方が未熟な方をサポートし、共に成長する。 | 新しい趣味の紹介、人生相談。 | サポートされる側が、自立する努力を放棄すること。 |
| **HASC** | **守護と献身** | 安定した役割分担のもと、互いを支え合う関係。 | 家族行事の計画、家事の明確な役割分担。 | 役割が固定化し、感謝の気持ちを忘れること。 |
| **HASD** | **補完的ペア** | 互いの長所と短所がパズルのように噛み合う。 | 共同での家事、得意分野を活かした協力。 | 相手の苦手なことを責め、改善を強要すること。 |
| **HISC** | **鉄の結束組織** | 明確な目標と利益のために、強力な上下関係で結ばれる。 | 期間限定のプロジェクト、規律あるチーム運営。 | 個人の感情や意見を完全に無視すること。 |
| **HISD** | **期間限定の同盟** | 特定の目的達成のため、一時的に協力するドライな関係。 | 短期集中型のタスク、契約に基づく協業。 | 契約以上の感情的なつながりや将来を期待すること。 |
| **HIAC** | **機能的支配** | 明確な指示系統のもと、効率を最大化する関係。 | 厳格なルールに基づいた共同作業、危機管理。 | 指示される側からの建設的な意見を封殺すること。 |
| **HIAD** | **即興の舞台** | 危ういバランスの上に成り立つ、スリリングな関係。 | 即興演劇、予測不可能な冒険。 | この関係が永続的であると誤解すること。 |

## 6. 事業・戦略プラン

(元の仕様書の内容を維持)

## 7. リリースまでのロードマップ

(元の仕様書の内容を維持)

## 8. 技術仕様概要

*   **データベース設計:**
    *   `users` テーブル (user_id, age, mbti)
    *   `relationships` テーブル (relation_id, user_a_id, user_b_id, category)
    *   `answers` テーブル (answer_id, relation_id, user_id, q1, q2, ..., q32)
    *   `results` テーブル (result_id, relation_id, type_code, kizuna_score, ...)
*   **APIエンドポイント:**
    *   `POST /diagnose`: ユーザー情報と回答を受け取り、診断結果を返す。
    *   `GET /result/{relation_id}`: 過去の診断結果を取得する。

## 9. 追加機能ロードマップと詳細仕様

診断後のユーザー体験を最大化し、サービスの継続的な成長を促すため、以下の優先順位で追加機能を実装します。

9.1 フェーズ1：MVP（Minimum Viable Product）の魅力向上

目的: 診断直後の体験価値を最大化し、SNSでのバイラル効果を狙う。

9.1.1 【優先度1】4軸レーダーチャート重ね合わせ

•
概要: ユーザーAとBの各軸に対する認識（Adjusted Score）を一つのレーダーチャート上に重ねて表示し、二人の認識のズレを直感的に可視化する。

•
UI仕様: 診断結果画面の最上部に表示。ユーザーAを青色の塗りつぶし、ユーザーBを赤色の線で描画し、マウスオーバーでスコア値を表示する。

•
技術仕様: Chart.js等のライブラリを使用し、radar_chart_dataオブジェクトを入力としてインタラクティブなチャートを生成する。

9.1.2 【優先度2】SNSシェア用画像自動生成

•
概要: 診断結果の主要部分（関係性タイプ名、Kizuna Score、レーダーチャート）を一枚の画像にまとめ、SNSでシェアしやすくする。

•
UI仕様: 複数のデザインテンプレートから選択可能。画像には二人の名前、タイプ名、キャッチコピー、スコア、レーダーチャートを含める。

•
技術仕様: サーバーサイドでPillow（Python）やnode-canvas（Node.js）を用いて、テンプレート画像と診断結果を動的に合成する。

9.1.3 【優先度3】二人の「取扱説明書」

•
概要: 診断された関係性タイプと二人のMBTIに基づき、関係をより良く維持・発展させるための具体的なアドバイスをまとめたパーソナライズドマニュアル。

•
UI仕様: 診断結果ページからアクセスできるWebページまたはダウンロード可能なPDFとして提供。章立て構成で読みやすくする。

•
技術仕様: 関係性タイプとMBTIの組み合わせごとに用意されたアドバイステンプレートを動的に組み合わせ、ドキュメントを生成する。

9.1.4 【優先度4】禁句ワード & 魔法のフレーズ

•
概要: 相手のMBTIの認知機能（特に劣等機能）を考慮し、避けるべき「禁句ワード」と喜ばれる「魔法のフレーズ」を具体的に提示する。

•
UI仕様: 「取扱説明書」内の一セクションとして、個人を特定して表示。「Aさん（INFP）に言ってはいけないこと」のように具体的に示す。

•
技術仕様: MBTIの16タイプそれぞれについて、「地雷となりやすいポイント」と「評価されやすいポイント」をまとめたDBからフレーズをリストアップする。

9.2 フェーズ2：エンゲージメント向上

目的: ユーザーのサービスへの関与を深め、再訪を促す。

9.2.1 【優先度5】二人だけの会話スターター10選

•
概要: 認識のズレ（Gap Score）が大きい軸に基づいて、関係を深めるための対話のきっかけとなる質問を10個提案する。

•
UI仕様: 診断結果ページにリスト表示し、各質問はクリックでコピー可能にする。

•
技術仕様: Gap_Score が大きい軸から優先的に、事前に用意された質問プールから合計10問をランダムに抽出する。

9.2.2 【優先度6】関係性タイプ別おすすめデートプラン

•
概要: 16の関係性タイプの特徴に合わせて、二人の関係性を豊かにする具体的なデートプランやアクティビティを提案する。

•
UI仕様: 写真付きのカード形式で3つのプランを提案。「プラン名」「キャッチコピー」「おすすめ理由」を記載。

•
技術仕様: 16タイプごとに推奨アクティビティをマッピングしたDBから、3つのプランをランダムに選んで表示する。

9.2.3 【優先度7】16タイプ相関マップ

•
概要: 16種類の関係性タイプを2次元マップ上に配置し、自分たちの現在地を視覚的に示す。

•
UI仕様: 横軸を「関与動機」、縦軸を「権力均衡」とした散布図で表示。自分たちのタイプをハイライトする。

•
技術仕様: 16タイプに事前に割り当てた固定座標 (x, y) を基にチャートを生成する。

9.3 フェーズ3：プラットフォーム化

目的: 高度な分析とソーシャル機能で、診断ツールを超えたプラットフォームとしての価値を創造する。

9.3.1 【優先度8】相手の隠れた欲求推定

•
概要: 認識のズレ（Gap Score）を利用して、スコアが低い側のユーザーが言葉にしていない「隠れた欲求」を推定し、テキストで優しく提示する。

•
UI仕様: 「もしかして、相手はこう思っているかも？」というセクションで、断定を避けた丁寧な表現で表示。

•
技術仕様: Gap_Score が一定値以上開いた軸を特定し、「（スコアが高い軸の要素）をもっと求めている」というパターンの文章を生成する。

9.3.2 【優先度9】関係性の未来予測シミュレーション

•
概要: 診断結果やMBTI等の情報を基に、LLMを用いて二人の5年後、10年後のショートストーリーを生成する。

•
UI仕様: 「二人の未来を覗いてみる」ボタンからモーダルウィンドウで表示。タイプライター風アニメーションで没入感を高める。

•
技術仕様: GPT-4やGemini等のLLM APIに、診断結果を含む詳細なプロンプトを送信し、返ってきたストーリーを整形して表示する。

9.3.3 【優先度10】関係性ネットワーク図

•
概要: ログインユーザーを中心に、過去に診断したすべてのペアをネットワーク図として可視化し、自身の人間関係全体を俯瞰できるようにする。

•
UI仕様: マイページ内の専用ページで表示。ユーザーを円（ノード）、関係を線（エッジ）で表現し、クリックで診断結果をポップアップ表示する。

•
技術仕様: ログインユーザーが含まれる全リレーションシップをDBから取得し、D3.js等のライブラリでインタラクティブなグラフを描画する。


**以上**
